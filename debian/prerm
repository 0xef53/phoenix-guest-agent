#!/bin/sh -eu

sysvinit_del() {
    grep -q '#-- PGA begin' /etc/inittab >/dev/null || return 0
    echo 'Removing inittab entry...'
    sed -e '/#-- PGA begin/,/#-- PGA end/d' </etc/inittab >/etc/inittab'{new}'
    mv -f /etc/inittab'{new}' /etc/inittab

    ps -p 1 >/dev/null 2>&1 && kill -s HUP 1 || :
}


upstart_del() {
    /sbin/stop phoenix-ga
    rm -f /etc/init/phoenix-ga.conf
}


case "$1" in
    remove|upgrade|deconfigure)
        test -f '/etc/inittab' && sysvinit_del || :
        test -x '/sbin/start' && upstart_del || :
    ;;
    failed-upgrade)
    ;;
    *)
        echo "prerm called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
